<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<script src="vanilla.js"></script>
		<title>EC544 Class Map</title>
	</head>
	<body>
	<style>
	#test {
     width: 500px;
     height:700px;
     margin: 0px auto;
	 left: 450px;
    }
	</style>
	<div id=Title text-align="center">
	<h1> Arduino Localization </h1>	
	</div>
	<div id="test">
		<canvas id="main" height="1000px" width="1000px"></canvas>	
	</div>
<script>
	
    
    
	var x_Position_of_arduino=0;
	var y_Position_of_arduino=0;   //need to be updated from the database
	window.onload = function () {
    var map = 
     [[1,1,0,0,0,0,0,0,1],
	  [1,1,0,0,0,0,0,0,1],
	  [1,0,0,0,0,0,0,0,1],
	  [1,0,0,0,0,0,0,0,1],
	  [1,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [1,0,0,0,0,0,0,0,0],
	  [1,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,0],
	  [1,0,0,0,0,0,0,0,0], 
	  [1,0,0,0,0,0,0,0,0],
	  [0,0,0,0,0,0,0,0,1],
	  [0,0,0,0,0,0,0,0,1],
	  [0,0,0,0,0,0,0,0,1],
	  [0,0,0,0,0,0,0,1,1],
	  [1,1,0,0,0,0,0,1,1],
	  [1,1,0,0,0,0,0,1,1]];
    
    // The next part grabs the canvas element id of 'main' within our page <body>.
    var ctx = document.getElementById('main').getContext('2d');
    
    // Using two for loops we run through each of the array rows stored and their element values.
    for (var i = 0; i < map.length; i++) {
        for (var j = 0; j < map[i].length; j++) {
    
            // Check if the value is a 1, represeting a graphic should be drawn.
            if (map[i][j] === 0) {
                // Draw a rectangle at i & j position * 20 pixels so that
                // our 20x20 pixel squares are correctly positioned.
                ctx.fillStyle = '#000000';
                ctx.fillRect(j * 25, i * 25, 25, 25);
            }
    
        }
    }
	
	var updateInterval = 100;	
	
	var updateMap = function () {
		for (var i = 0; i < map.length; i++) {
			for (var j = 0; j < map[i].length; j++) {
    
				// Check if the value is a 1, represeting a graphic should be drawn.
				if (map[i][j] === 0) {
                // Draw a rectangle at i & j position * 20 pixels so that
                // our 20x20 pixel squares are correctly positioned.
					ctx.fillStyle = '#000000';
					ctx.fillRect(j * 25, i * 25, 25, 25);
				}
    
			}
		} 
        ctx.fillStyle = '#FFFFFF';
		ctx.fillRect(Math.abs(8-y_Position_of_arduino) * 25, Math.abs(21-x_Position_of_arduino) * 25, 25, 25);   
       
		x_Position_of_arduino++;
		if(x_Position_of_arduino>21){
		    y_Position_of_arduino++;
			x_Position_of_arduino=0;
		}
		if(y_Position_of_arduino>8)
			y_Position_of_arduino=0;	
 		};
 		
 		updateMap();		
    
 		// update chart after specified interval 
 		setInterval(function(){updateMap()}, updateInterval);
	}


</script>
	</body>
</html>